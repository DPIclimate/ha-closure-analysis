<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Oyster HA Closure Analysis: src/BOM/stations.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Oyster HA Closure Analysis<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">Prediction and analysis of oyster harvest area closures.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('stations_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">stations.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="stations_8h_source.html">BOM/stations.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for stations.c:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="stations_8c__incl.svg" width="1006" height="411"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3c3ce515993de64f2540fdc704c9c4a"><td class="memItemLeft" align="right" valign="top">static int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stations_8c.html#ac3c3ce515993de64f2540fdc704c9c4a">BOM_ParseStations</a> (<a class="el" href="struct_utils___req_data___type_def.html">Utils_ReqData_TypeDef</a> *stream, <a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *stations)</td></tr>
<tr class="memdesc:ac3c3ce515993de64f2540fdc704c9c4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse .txt file into a BOM_Stations struct.  <a href="stations_8c.html#ac3c3ce515993de64f2540fdc704c9c4a">More...</a><br /></td></tr>
<tr class="separator:ac3c3ce515993de64f2540fdc704c9c4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5858ada54b34723f300b81f90fe08f3"><td class="memItemLeft" align="right" valign="top">CURLcode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stations_8c.html#aa5858ada54b34723f300b81f90fe08f3">BOM_GetWeatherStations</a> (<a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *stations)</td></tr>
<tr class="memdesc:aa5858ada54b34723f300b81f90fe08f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a list of NSW BOM weather stations.  <a href="stations_8c.html#aa5858ada54b34723f300b81f90fe08f3">More...</a><br /></td></tr>
<tr class="separator:aa5858ada54b34723f300b81f90fe08f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a083e250ebc81c4c64719dbff44b41dcb"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stations_8c.html#a083e250ebc81c4c64719dbff44b41dcb">BOM_LoadStationsFromTxt</a> (const char *filename, <a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *stations)</td></tr>
<tr class="memdesc:a083e250ebc81c4c64719dbff44b41dcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load BOM station list from cached .txt file (obtained from BOM FTP server)  <a href="stations_8c.html#a083e250ebc81c4c64719dbff44b41dcb">More...</a><br /></td></tr>
<tr class="separator:a083e250ebc81c4c64719dbff44b41dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e6238750fdb884c26e97b580f0d68f"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stations_8c.html#af2e6238750fdb884c26e97b580f0d68f">BOM_ClosestStationIndex</a> (double latitude, double longitude, <a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *stations)</td></tr>
<tr class="memdesc:af2e6238750fdb884c26e97b580f0d68f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the closest BOM station to a define latitude and longitude.  <a href="stations_8c.html#af2e6238750fdb884c26e97b580f0d68f">More...</a><br /></td></tr>
<tr class="separator:af2e6238750fdb884c26e97b580f0d68f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="af2e6238750fdb884c26e97b580f0d68f" name="af2e6238750fdb884c26e97b580f0d68f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e6238750fdb884c26e97b580f0d68f">&#9670;&nbsp;</a></span>BOM_ClosestStationIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t BOM_ClosestStationIndex </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>latitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>longitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>stations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index of the closest BOM station to a define latitude and longitude. </p>
<p >Gets an index to the closest BOM weather station in reference to a provided latitude and longitude.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">latitude</td><td>Latitude of interest. </td></tr>
    <tr><td class="paramname">longitude</td><td>Longitude of interest. </td></tr>
    <tr><td class="paramname">stations</td><td>List of stations to search through. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Index of closest BOM station to provided lat and long. </dd></dl>

</div>
</div>
<a id="aa5858ada54b34723f300b81f90fe08f3" name="aa5858ada54b34723f300b81f90fe08f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5858ada54b34723f300b81f90fe08f3">&#9670;&nbsp;</a></span>BOM_GetWeatherStations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CURLcode BOM_GetWeatherStations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>stations</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a list of NSW BOM weather stations. </p>
<p >Get a list of NSW BOM weather station.</p>
<p >The BOM provides a list of weather stations as a .txt file on their FTP server. This function extracts the NSW locations and appends them to a list of stations within <a class="el" href="struct_b_o_m___weather_stations___type_def.html" title="BOM weather stations list and count.">BOM_WeatherStations_TypeDef</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stations</td><td>List of weather stations to popultate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Curl error code. </dd></dl>

</div>
</div>
<a id="a083e250ebc81c4c64719dbff44b41dcb" name="a083e250ebc81c4c64719dbff44b41dcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a083e250ebc81c4c64719dbff44b41dcb">&#9670;&nbsp;</a></span>BOM_LoadStationsFromTxt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t BOM_LoadStationsFromTxt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>stations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load BOM station list from cached .txt file (obtained from BOM FTP server) </p>
<p >Reads a .txt from file to parse out a list of weather station.</p>
<p >A .txt file is loaded from a temporary directory. fgets() is used to parse the file line by line into a buffer. The buffer is scanned using sscanf() to extract each relevent weather station. Only NSW weather stations are used to populate a list of stations (provided). Weather stations that contain "AWS" have this string removed in their filename. This filename should correspond to the location in BOM's FTP server where historical data is found. E.g. .../filename/filename-date.csv or .../moyura_airport/moyura_airport-202206.csv</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Location of BOM weather stations .txt file. </td></tr>
    <tr><td class="paramname">stations</td><td>Stations object to populate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error status code. </dd></dl>

</div>
</div>
<a id="ac3c3ce515993de64f2540fdc704c9c4a" name="ac3c3ce515993de64f2540fdc704c9c4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c3ce515993de64f2540fdc704c9c4a">&#9670;&nbsp;</a></span>BOM_ParseStations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8_t BOM_ParseStations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_utils___req_data___type_def.html">Utils_ReqData_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_b_o_m___weather_stations___type_def.html">BOM_WeatherStations_TypeDef</a> *&#160;</td>
          <td class="paramname"><em>stations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse .txt file into a BOM_Stations struct. </p>
<p >Parse BOM weather station .txt file from FTP server.</p>
<p >This function saves the downloaded raw text stream from the BOM FTP server into a temporary file (under the tmp) directory. This then calls <a class="el" href="stations_8c.html#a083e250ebc81c4c64719dbff44b41dcb" title="Load BOM station list from cached .txt file (obtained from BOM FTP server)">BOM_LoadStationsFromTxt()</a> to populate the list of BOM weather stations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>Raw response from BOM FTP server download. </td></tr>
    <tr><td class="paramname">stations</td><td>Stations object to populate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code status if file can no the written to. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_5c1a389c19f5e1aef93d90d0120de696.html">BOM</a></li><li class="navelem"><a class="el" href="stations_8c.html">stations.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
